<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STUDENT</title>
    <link rel="stylesheet" href="../static/css/student.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1>VIVO·智学·学生端</h1>
        <div class="wrapper">
            <button class="custom-button" onclick="register()">
                <span class="material-icons">draw</span>
                <span>注册</span>
            </button>

            <button class="custom-button" onclick="login()" >
                <span class="material-icons">login</span>
                <span id="student_login">登录</span>
            </button>
        </div>

        <section>
          <div class="menu">
            <div>
              <button onclick="go_courses()">
                <span class="material-icons">
                  menu_book
                </span>
                <h3>课程信息</h3>
                <p>查看正在学习的课程和成绩</p>
              </button>
            </div>

            <div>
              <button onclick="go_advice()">
                <span class="material-icons">
                  tips_and_updates
                </span>
                <h3>学习建议</h3>
                <p>查看由ai生成的学习报告，体验与ai学习交流</p>
              </button>
            </div>

            <div>
              <button onclick="go_homework()">
                <span class="material-icons">
                  cloud_upload
                </span>
                <h3>上传作业</h3>
                <p>上传完成的作业，体验ai批改作业</p>
              </button>
            </div>

            <div>
              <button onclick="go_recommend()">
                <span class="material-icons">
                  thumb_up
                </span>
                <h3>课程推荐</h3>
                <p>体验我们精选的优质网络课程</p>
              </button>
            </div>

            <div>
              <button onclick="go_forum()">
                <span class="material-icons">
                  groups
                </span>
                <h3>交流论坛</h3>
                <p>自由交流天地，互助学习进步</p>
              </button>
            </div>

              <div>
              <button onclick="go_live()">
                <span class="material-icons">
                  groups
                </span>
                <h3>进入直播</h3>
                <p>同专业学生分享聊天</p>
              </button>
            </div>

            <div>
              <button >
                <span class="material-icons">
                  local_cafe
                </span>
                <h3>更多功能</h3>
                <p>正在开发中，敬请期待</p>
              </button>
            </div>
          </div>
        </section>
    </div>

    <div class="center">
        <button onclick="go_home()" class="return"><i></i><span>返回主页</span></button>
    </div>


<script>
     var urlParams = new URLSearchParams(window.location.search);
     var receivedData = urlParams.get('data');
     var cookieName = "student";
     var cookieValue = receivedData;
     document.cookie = cookieName + "=" + cookieValue;

    function checkCookie(cookieName) {
    // 获取所有的 Cookie，并以分号加空格进行分割
    var cookies = document.cookie.split("; ");

    // 遍历所有 Cookie
    for (var i = 0; i < cookies.length; i++) {
        // 分割每个 Cookie 的键值对
        var cookiePair = cookies[i].split("=");

        // 检查当前 Cookie 是否为目标 Cookie
        if (cookiePair[0] === cookieName && cookiePair[1] === cookieValue) {
            // 如果找到目标 Cookie，返回 true
            return cookieValue;
        }
    }
    return false;
}
    var myCookieValue = checkCookie("student");
    if (myCookieValue){
        var buttonContent = '<span class="material-icons">person</span>'; // 替换图标部分
        buttonContent += '<span>欢迎你,' + myCookieValue + '</span>';
        var loginButton = document.querySelector(".wrapper .custom-button:nth-child(2)"); // 选择第二个按钮
        loginButton.innerHTML = buttonContent;
        loginButton.classList.add("hovered"); // 添加 hover 类
    }
        //隐藏注册按钮
     document.addEventListener("DOMContentLoaded", function () {
        var ck = checkCookie('student');
        if (ck == cookieValue) {
            var registerButton = document.querySelector('.wrapper .custom-button:nth-child(1)'); // 选择注册按钮
            registerButton.classList.add('hidden');
        }
    });
     function go_advice(){
         var ck=checkCookie('student');
         // alert(cookieValue);
         if(ck==cookieValue){
             // alert(ck);
             window.location.href="/smartlearn/student/advice";

         }else{
             alert("请先登录");
             window.location.href="/smartlearn/login/student";
         }
     }
     function go_courses(){
         var ck=checkCookie('student');
         // alert(cookieValue);
         if(ck==cookieValue){
             // alert(ck);
             window.location.href="/smartlearn/student/course";
         }else{
             alert("请先登录");
             window.location.href="/smartlearn/login/student";
         }
     }
     function go_forum(){
         var ck=checkCookie('student');
         // alert(cookieValue);
         if(ck==cookieValue){
             // alert(ck);
             window.location.href="/smartlearn/student/forum";
         }else{
             alert("请先登录");
             window.location.href="/smartlearn/login/student";
         }
     }
     function go_recommend(){
         var ck=checkCookie('student');
         // alert(cookieValue);
         if(ck==cookieValue){
             // alert(ck);
             window.location.href="/smartlearn/student/recommend";
         }else{
             alert("请先登录");
             window.location.href="/smartlearn/login/student";
         }
     }

     function go_homework(){
         var ck=checkCookie('student');
         // alert(cookieValue);
         if(ck==cookieValue){
             // alert(ck);
             window.location.href="/smartlearn/student/homework";
         }else{
             //alert("请先登录");
             window.location.href="/smartlearn/login/student";
         }
     }

     function go_live(){
         var ck=checkCookie('student');
         // alert(cookieValue);
         if(ck==cookieValue){
             // alert(ck);
             window.location.href="/smartlearn/student/live";
         }else{
             //alert("请先登录");
             window.location.href="/smartlearn/login/student";
         }
     }
     function login(){
         var ck=checkCookie('student');
         // alert(cookieValue);
         if(ck==cookieValue){
             // alert(ck);
         }else{
             window.location.href="/smartlearn/login/student";
         }
     }

     function register(){
        window.location.href="/smartlearn/adduser/student"
    }



     function go_home(){
         window.location.href = '/smartlearn';
        }
</script>
</body>
</html>
