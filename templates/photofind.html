<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>地表识别</title>
    <style>
   body {
    font-family: 'Arial', sans-serif;
    background: url('/static/img/旅游/旅游 (3).jpg') no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    margin: 0;
    padding: 0;
    color: #fff; /* 文字颜色调整为白色以适应背景图片 */
}

h1 {
    text-align: center;
    color: #fff; /* 标题颜色调整为白色 */
    margin-top: 20px;
}

#imageInput, button {
    display: block;
    margin: 20px auto;
    padding: 10px;
    border: 1px solid #fff; /* 边框颜色调整为白色 */
    border-radius: 5px;
    transition: all 0.3s ease;
}

#imageInput {
    background-color: rgba(255, 255, 255, 0.7); /* 输入框背景半透明 */
}

button {
    background-color: #5cb85c;
    color: white;
    font-size: 16px;
    cursor: pointer;
    transition: background-color 0.3s;
}

button:hover {
    background-color: #4cae4c;
}

#result {
    margin: 20px auto;
    padding: 20px;
    width: 80%; /* 定义宽度 */
    background-color: rgba(255, 255, 255, 0.7); /* 结果区域背景半透明 */
    border-radius: 5px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* 添加阴影效果 */
}

.error {
    color: red;
}

/* 媒体查询，确保在小屏幕上也能良好显示 */
@media (max-width: 768px) {
    h1 {
        font-size: 24px;
    }
    #result {
        width: 90%;
    }
}
</style>
</head>
<body>
    <h1>地表识别</h1>
   <input type="file" id="imageInput" name="image" accept="image/*">
    <button onclick="recognizeLandmark()">识别地表</button>
    <div id="result"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
function recognizeLandmark() {
    var input = document.getElementById('imageInput');
    if (input.files && input.files[0]) {
        var formData = new FormData();
        formData.append('image', input.files[0]);
        // 创建 XMLHttpRequest 对象
        var xhr = new XMLHttpRequest();

        // 配置请求类型、URL 以及是否异步处理
        xhr.open('POST', '/smartlife/travel/recognize-landmark', true);

        // 定义请求成功时的回调函数
        xhr.onload = function () {
            if (xhr.status >= 200 && xhr.status < 300) {
                // 请求成功，处理返回的数据
                displayResult(JSON.parse(xhr.responseText));
            } else {
                // 请求失败，处理错误情况

                console.error('Error:', xhr.statusText);
                displayResult({error: 'Failed to recognize landmark or upload image.'});
            }
        };

        // 定义请求失败时的回调函数
        xhr.onerror = function () {
            console.error('Request error');
            displayResult({error: 'Request failed.'});
        };

        // 发送请求，携带 formData 数据
        xhr.send(formData);
    } else {
        alert('请先选择一个图片文件。');
    }
}

function displayResult(result) {
    var resultElement = document.getElementById('result');
    resultElement.style.opacity = 0; // 初始透明度为0
    resultElement.innerHTML = '识别结果：' + JSON.stringify(result, null, 2);

    setTimeout(function() {
        resultElement.style.opacity = 1; // 逐渐变为不透明
    }, 10);
}
    </script>
</body>
</html>